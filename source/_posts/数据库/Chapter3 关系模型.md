---
title: 第三章 关系模型
date: 2021-4-8 24:00:00
tags: 
categories: 数据库
---

## 第三章 关系模型

### 3.2 基本术语

#### 3.2.1 关系数据结构

<!-- more -->

**|关系|**：关系是由行和列组成的表

**|属性|**：属性是关系中命名的列

**|域|**：域是一个或多个属性的取值集合

- 每一个关系中的属性都定义着一个域

**|元组(Tuple)|**：关系中的每一行称为元组

**|维数/度(Degree)|**：关系的度是指关系所包含属性的个数

**|基数(Cardinality)|**：关系的基数是指它所包含元组的个数

<img src="https://i.loli.net/2021/05/05/iLKf6SmTFoDuMbO.png" alt="9.png" style="zoom:80%;" />

<img src="https://i.loli.net/2021/05/05/CRZqdUh5QDz2LAe.png" alt="10.png" />

#### 3.2.3 数据库中的关系

**|关系模式|**：由一组属性和域名对定义的命名关系

设属性A<sub>1</sub>, A<sub>2</sub>, …, A<sub>n</sub>对应的域分别为D<sub>1</sub>, D<sub>2</sub>, …, D<sub>n</sub>。那么，集合{A<sub>1</sub>:D<sub>1</sub>, A<sub>2</sub>D<sub>2</sub>, …, A<sub>n</sub>D<sub>n</sub>}就是一个关系模式。

**|关系模式数据库|**：关系模式的集合，集合中的每个关系都应有不同的名字

#### 3.2.4 关系的性质

- 关系模式中各关系不能重名
- 每个属性都有不同的名字

- 属性的值都来自同一个域

- 每个元组是不同的，没有重复的元组
- 属性的顺序并不重要
- 元组的顺序并不重要

#### 3.2.5 关系键

**|超键|**：一个属性或**属性集合**，它能唯一地标识出关系中的每个元组。

**|候选键|**：本身是超键但其任何子集都不再是超键。

**|主键|**：被选用于唯一标识关系中各元组的候选键。

**|外部关键字|**：当一个关系中的某个属性或属性集合与另一个关系（也可能就是自己）的候选键匹配时，就称这个属性或属性集合为外键。

### 3.3 完整性约束

关系数据模型有三个组成部分：数据结构、数据管理和完整性约束

#### 3.3.1 空

**|空|**：代表对一个元组当前取值还不知道或是不可用的属性值

#### 3.3.2 实体完整性

**|实体完整性|**：在基本关系中，主键的属性不能为空

针对基关系

- 基关系：table	定义 + 数据
- 非基关系
  - view	定义
  - select    X

#### 3.3.3 参考完整性

**|参考完整性|**：如果在关系中存在某个外部关键字，则它的值或与主关系中某个元组的候选键取值相等，或者全为空

#### 3.3.4 用户完整性

**|用户完整性|**：由数据库用户或数据库管理员所指定的附加规则，它约束企业的某些方面。

### 3.4 视图

视图不完全是用户看到的外部模型，它指虚关系或导出关系，即无需单独存在，必要时可从一或多个基本关系中动态地将其导出。

#### 3.4.1 术语

**|视图|**：对一个或多个基本关系进行关系操作的得到的动态结果。视图是一个无需存在于数据库当中，但却可以根据某个特定用户需要在必要时在生成的虚关系。

#### 3.4.2 视图的用途

- 通过对特定用户隐藏部分数据库信息，提供了一个强大而灵活的安全机制。
- 允许用户根据自己的需求自定义访问数据的方法，因此不同的用户可以通过不同的途径同时看到相同的数据。
- 可以简化对基本关系的复杂操作。

#### 3.4.3 视图的更新

对某个基本关系的所有更新应该立即反应到涉及这个基本关系的视图中。

- 如果视图由一个基本关系的简单查询生成，而且它还包含了基本关系中的主键或是候选键，则可以通过这个视图进行更新操作。

### 作业

<img src="https://i.loli.net/2021/05/05/ui3tyzSAe8Rrn7q.png" alt="11.png" style="zoom:80%;" />

1.  a) 关系是由行和列组成的表

   b) 域是一个或多个属性的取值集合

   c) 属性是关系中命名的列

   d) 关系中的每一行称为元组

   e) 本身是超键但其任何子集都不再是超键是候选键

   f) 被选用于唯一标识关系中各元组的候选键。

   g) 当一个关系中的某个属性或属性集合与另一个关系的候选键匹配时，就称这个属性或属性集合为外键。

2.  

- 关系模式中各关系不能重名
- 每个属性都有不同的名字

- 属性的值都来自同一个域

- 每个元组是不同的，没有重复的元组
- 属性的顺序并不重要
- 元组的顺序并不重要

3. 当一个关系中的某个属性或属性集合与另一个关系的候选键匹配时，就称这个属性或属性集合为外键。与其他关系的候选键的属性相匹配的就是外键。例如

   Branch

   BranchNo street

   Staff

   staffNo BranchNo

   Staff表中的BranchNo与Branch表中的BranchNo相匹配，就是外键

4. 视图是对一个或多个基本关系进行关系操作的得到的动态结果。视图是一个无需存在于数据库当中，但却可以根据某个特定用户需要在必要时再生成的虚关系。与基本关系相比，视图是一个虚关系，从基本关系中导出得到。视图用于提供安全机制，而基本关系无法提供。基本关系有定义和数据，而视图只有定义没有数据。

5. hotelNo和guestNo是模式中的外键，hotelNo是Hotel表中的主键也是Room表中的外键；guestNo是Guest表中的主键也是Booking表中的外键。根据实体完整性规则，主键中的属性不能为空，如hotelNo, roomNo不能为空。根据引用完整性规则，Booking表中的HotelNo与Hotel表中的hotelNo相匹配，因此Booking表中的HotelNo的取值应在Hotel表中的hotelNo属性的域内。guestNo也与之类似。

