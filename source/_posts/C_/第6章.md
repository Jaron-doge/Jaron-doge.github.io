---
title: 第6章 流、文件
date: 2021-4-6 24:00:00
tags: 
categories: C#&nbsp;
---
## 流、文件

### 6.1 IO及文件管理

#### 6.1.1 Stream类

<!-- more -->

**按存取位置分**

- FileStream、MemoryStream、BufferedStream

**读写类**

- BinaryReader和BinaryWriter
- TextReader和TextWriter
  - StreamReader和StreamWriter
  - StringReader和StringWriter

**其关系**

- 包装关系

  ```C#
  FileStream fs = new FileStream("a.txt", FileMode.Create);
  StreamWriter writer = new StreamWriter(fs);
  ```

#### 6.1.2 文件及文件夹管理

**对文件和文件夹操作的类**

- FileInfo			   （具体的文件）
  - 使用FileInfo，就可以获取文件大小等各种信息
- File				      （提供static方法）
- DirectoryInfo     （具体的文件夹） 
  - 获取文件夹大小等各种信息
- Directory            （提供static方法）
- FileSystemInfo   （FileInfo + DirectoryInfo）
- Path                     （文件路径类）

### 6.2 文件读写

#### 6.2.1 StreamReader、StreamWriter

**StreamReader**

```c#
new StreamReader(文件路径, FileEncode);
```

- ReadLine、ReadToEnd、Read、Peek、Close

**StreamWriter**

```c#
new StreamWriter(文件路径, FileMode, FileEncode)
```

- WriteLine、Write、Flush、Close

#### 6.2.2 二进制文件

- Seek、Read

**序列化**

```c#
[Serializable]
class Book {

    public string name;
    //public double price;
    public int num=13; //如果book的版本变了，反序列化时，这个默认值不会被执行
    public string [] reader;

    override public string ToString(){
        return name + ":" //+ price 
            + ":" + string.Join(",",reader)
            + ":" + num;
    }
}


Static void Main(string[] args)
{
    //Serialization of String Object
    BinaryFormatter formatter = new BinaryFormatter();
    FileStream stream = new FileStream("C:\\StrObj.t", FileMode.Create, 
                                       FileAccess.Write ,FileShare.None);
	formatter.Serialize(stream, book);
	stream.Close();
    
    //Deserialization of String Object
    FileStream readstream = new FileStream("C:\\StrObj.t", FileMode.Open , 
                                           FileAccess.Read ,FileShare.Read );
	Book book2 = (Book)formatter.Deserialize(readstream);
	readstream.Close();
	Console.WriteLine(book2);
	Console.ReadLine();
}
```

### 6.3 注册表

**|注册表|**：存放计算机运行方式的配置信息的树状表。其中包括Windows操作系统配置信息、应用程序配置信息、专用用户设备配置信息、环境配置信息等。