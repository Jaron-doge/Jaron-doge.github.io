---
title: 第9章 文本处理及正则表达式
date: 2021-4-9 24:00:00
tags: 
categories: C#&nbsp;
---
## 文本处理及正则表达式

### 9.1 基于文本的应用

<!-- more -->

- Console类

- String类

- StringBuilder类

- System.Text.Encoding类

  - .Default	.UTF8	.GetEncoding

  - .GetBytes(str)    .GetString(byte[])

### 9.2 正则表达式

#### 9.2.1 正则表达式中几个主要要素

**字符**  ab

大写表示非

- [a-zA-z] 即\w

- [0-9] 即\d     [\^0-9] 即\D

- \s 即空白\S 即非空白

- . 表任意

**次数** {2, 6}

* 即{0,} + 即{1,} ? 即{0,1}

- *? +? ?? 表示lazy匹配   (匹配到一次就算数)

**|表示或者    ()表示成组**

**位置限定**

- ^(首)     xxxxxx$ (尾)
- \b单词边界    \B 非单词边界

**(?<名称>xxxxxxxx)    表示对分组进行命名**

- 在替换时, 使用\${名称}
- 若不命名,则为​\$1, \$2等等    而$0 表示整个匹配

**(?i:xxxxxxxxx)    表示选项(i表示忽略大小写)**

#### 9.2.2 Regex

using System.Text.RegularExpressions;

**Static方法**

- Regex.IsMatch( s, pattern )

**使用对象**

- Regex对象

  - .IsMatch(s) 	.Match(s) 	.Matches(s)

  - .Replace(s, r)

- Match对象
  - .Groups 各组	.Value 原串	.Result(xxxxx)替换

```c#
string pattern = @"^[\. a-zA-z]+ (?<name>\w+), [a-zA-z]+, x(?<ext>\d+)$";
string[] sa =
{
    "Dr. David Jones, Ophthalmology, x2441",
    "Ms. Cindy Harriman, Registry, x6231",
    "Mr. Chester Addams, Mortuary, x1667",
    "Dr. Hawkeye Pierce, Surgery, x0986",
};

Regex rx = new Regex(pattern);
foreach (string s in sa)
{
    Match m = rx.Match(s);
    if (m.Success)
        Console.Write(m.Result("${ext},  ${name}, $1"));
    Console.WriteLine("\t" +
        rx.Replace(s, "姓：${name}, 分机号：${ext}"));
}
```

